{% extends "base.html" %}

{% block title %}{{ user1 }} vs {{ user2 }}{% endblock %}

{% block head %}
  <style>
  </style>
  <script>
    function redirect() {
          let user1 = document.getElementById('user1').value;
          let user2 = document.getElementById('user2').value;
          window.location = "/" + user1 + "/vs/" + user2;
        }
  </script>
{% endblock %}

{% block content %}
  <a class="button is-medium is-ghost" href="/">
    Letterboxd Compare
  </a>
  <h1 class="title is-4">
    Movies that both <span class="title is-1">{{ user1 }}</span> and <span class="title is-1">{{ user2 }}</span> has watched sorted by former's rating.
  </h1>
  <p class="subtitle">
  <a class="button is-link" href="/{{ user2 }}/and/{{ user1 }}">Invert Comparison</a>
  <a class="button is-link" href="/{{ user2 }}/vs/{{ user1 }}">Versus comparison</a>
  </p>
   <div class="columns is-multiline">
     {% for (movie, other_rating) in diff %}
     <div class="column is-one-quarter-desktop is-half-tablet is-full-mobile">
       <div class="card is-flex is-flex-direction-column">
         <div class="card-image">
           <figure class="image is-2by3">
             <img src="{{ movie.poster }}" alt="{{ movie.name }}">
           </figure>
         </div>
         <div class="card-content is-flex-grow-1" style="min-height: 120px;">
           <div class="content">
             <p class="title is-6"><a href="{{ movie.url }}">{{ movie.name }}</a></p>
             <p class="subtitle is-7">
               {% if movie.rating.is_some() %} {{ user1 }}: {{ movie.rating.unwrap() }} {% endif %}
               {% if other_rating.is_some() %} | {{ user2 }}: {{ other_rating.unwrap() }} {% endif %}
             </p>
           </div>
         </div>
       </div>
     </div>
     {% endfor %}
   </div>
{% endblock %}
